# 한국투자증권 Open API 종목 관련 데이터 종합 분석

> 조사일자: 2026-01-29

## 1. API 개요

한국투자증권은 **국내 증권사 최초**로 2022년 4월부터 REST API와 웹소켓 방식의 Open API를 제공합니다.

### 주요 특징

| 항목 | 내용 |
|------|------|
| 출시일 | 2022년 4월 |
| API 방식 | REST API + WebSocket |
| 인증방식 | AppKey + AppSecret → OAuth Token |
| 지원 플랫폼 | 모든 OS (Windows, Mac, Linux) |
| 사용료 | 무료 (매매수수료는 HTS와 동일) |
| 주의사항 | 3개월 이상 미거래시 자동 해지 |

### 기존 API와의 차이점

- 기존: HTS 로그인 후 COM/OCX 방식 연결 (Windows 전용)
- 현재: API Key만으로 독립적인 트레이딩 가능 (모든 플랫폼)

---

## 2. 국내주식 API

### 2.1 [기본시세] 카테고리

| API명 | TR_ID | 설명 |
|--------|-------|------|
| 주식현재가 시세 | FHKST01010100 | 현재가, 전일대비, 등락률, 거래량 등 |
| 주식현재가 체결 | - | 실시간 체결 정보 조회 |
| 주식현재가 일자별 | - | 일별 OHLCV 데이터 |
| 주식현재가 호가/예상체결 | - | 매수/매도 10단계 호가, 예상체결가 |
| 주식현재가 투자자 | - | 개인/외국인/기관 투자자별 매매동향 (최근 30일) |
| 주식현재가 회원사 | - | 증권사별 매매 현황 |
| 국내주식기간별시세 | - | 일봉/주봉/월봉/년봉 OHLCV 데이터 |
| 주식현재가 당일시간대별체결 | - | 분봉 데이터 |

### 2.2 [순위분석] 카테고리

| API명 | URL | 설명 | 제한 |
|--------|-----|------|------|
| 거래량순위 | `/uapi/domestic-stock/v1/quotations/volume-rank` | HTS [0171] 화면 기능 | 최대 30건 |
| 등락률순위 | - | HTS [0170] 화면 기능 (상승률/하락률) | 최대 30건 |
| 수익자산지표 순위 | - | HTS [0173] 화면 기능 | 최대 30건 |
| 시가총액 상위 | - | 시가총액 기준 순위 | 최대 30건 |

> **참고**: 30건 이상 조회 필요시 종목조건검색 API 활용 (최대 100건)

### 2.3 [시세분석] 카테고리

| API명 | 설명 |
|--------|------|
| 국내기관_외국인 매매종목가집계 | 기관/외국인 순매수 상위 종목 |
| 종목조건검색 목록조회 | 저장된 조건검색 목록 |
| 종목조건검색조회 | 조건에 맞는 종목 검색 (최대 100종목) |
| 종목별 프로그램매매추이(체결) | 실시간 프로그램 매매 현황 |
| 종목별 프로그램매매추이(일별) | 일별 프로그램 매매 추이 |
| 종목별 외인기관 추정가집계 | 외국인/기관 추정 순매수 |
| 종목별일별매수매도체결량 | 일별 매수/매도 체결량 분석 |
| 시장별 투자자매매동향(시세) | 실시간 투자자별 동향 |
| 시장별 투자자매매동향(일별) | 일별 투자자별 동향 |
| 국내주식 신용잔고 일별추이 | 신용거래 잔고 현황 |
| 국내주식 예상체결가 추이 | 장 시작 전 예상체결가 |

### 2.4 [종목정보] 카테고리

| API명 | 설명 | 주요 데이터 |
|--------|------|------------|
| 재무정보 | 기업 재무제표 | 매출액, 영업이익, 순이익, 자산, 부채 등 |
| 비율분석 | 재무비율 분석 | PER, PBR, ROE, ROA, 부채비율 등 |
| 배당정보 | 배당 관련 정보 | 배당금, 배당수익률, 배당성향 등 |
| 투자의견 | 애널리스트 의견 | 목표주가, 투자의견, 컨센서스 등 |

### 2.5 [업종/기타] 카테고리

| API명 | 함수명 | 설명 |
|--------|--------|------|
| 업종지수 | `inquire_index_price` | 코스피/코스닥 업종별 지수 |
| 시간별지수 | - | 시간대별 지수 추이 |
| 예상체결지수 | - | 장 시작 전 예상 지수 |
| VI현황 | - | 변동성 완화장치(VI) 발동 현황 |
| 휴장일조회 | - | 국내 증시 휴장일 정보 |
| 뉴스제목 조회 | `news_title` | 주요 뉴스 제목 |

### 2.6 [실시간시세] 카테고리 (WebSocket)

| 데이터 종류 | 설명 | 용도 |
|------------|------|------|
| 실시간 체결가 | 체결 즉시 수신 | 체결가 모니터링 |
| 실시간 호가 | 10단계 호가창 실시간 업데이트 | 호가창 구현 |
| 예상체결 | 장 시작 전 예상체결가 | 시초가 예측 |
| 시장상태 | `market_status_krx` | 장 시작/종료, VI 발동 여부 |

---

## 3. 해외주식 API

### 3.1 지원 거래소

| 지역 | 거래소 | 코드 |
|------|--------|------|
| 미국 | NASDAQ | `nas` |
| 미국 | NYSE | `nys` |
| 미국 | AMEX | `ams` |
| 중국 | 상해(A주) | `shs` |
| 중국 | 상해(B주) | `shi` |
| 중국 | 심천(A주) | `szs` |
| 중국 | 심천(B주) | `szi` |
| 일본 | 도쿄 | `tse` |
| 홍콩 | 홍콩 | `hks` |
| 베트남 | 하노이 | `hnx` |
| 베트남 | 호치민 | `hsx` |

### 3.2 [기본시세] 카테고리

| API명 | 설명 | 비고 |
|--------|------|------|
| 해외주식 현재가 | 현재가, 등락률 | 미국: 정규장 종가 기준 (주간/애프터 미반영) |
| 해외주식 기간별시세 | 일봉/주봉/월봉 OHLCV | `get_stock_history(unit="D/W/M")` |
| 해외주식 종목코드 | 거래 가능 전체 종목 리스트 | - |

### 3.3 [시세분석] 카테고리

| API명 | 설명 |
|--------|------|
| 조건검색 | 해외주식 조건검색 |
| 투자자매매동향 | 투자자별 매매 현황 |

### 3.4 [실시간시세] 카테고리

| 데이터 종류 | 설명 |
|------------|------|
| 지연체결가 | 체결가 (지연) |
| 지연호가(아시아) | 아시아 시장 호가 |
| 지연호가(미국) | 미국 시장 호가 |

> **유의사항**: 미국 주식의 경우 당일 장 종료 후 08:40~08:45분경 수수료 반영된 최종 정산금액으로 잔고 변동

---

## 4. 기타 상품 API

### 4.1 국내선물옵션

| 카테고리 | 제공 기능 |
|----------|----------|
| 주문/계좌 | 선물옵션 주문, 잔고조회 |
| 기본시세 | 선물옵션 시세 조회 |
| 실시간시세 | 실시간 선물옵션 시세 |

### 4.2 해외선물옵션

| 카테고리 | 제공 기능 |
|----------|----------|
| 주문/계좌 | 해외선물옵션 주문, 잔고조회 |
| 기본시세 | 해외선물옵션 시세 조회 |
| 실시간시세 | 실시간 해외선물옵션 시세 |

### 4.3 장내채권

| 카테고리 | 제공 기능 |
|----------|----------|
| 주문/계좌 | 채권 주문, 잔고조회 |
| 기본시세 | 채권 시세 조회 |
| 실시간시세 | 실시간 채권 시세 |

### 4.4 ELW

| API명 | 설명 |
|--------|------|
| ELW 현재가 | ELW 시세 조회 |
| 신규상장 | 신규 상장 ELW 목록 |
| 민감도순위 | 민감도 기준 순위 |
| 기초자산별 종목시세 | 기초자산별 ELW 시세 |

### 4.5 ETF/ETN

| API명 | 설명 |
|--------|------|
| ETF/ETN 시세 | ETF/ETN 현재가 및 시세 정보 |

---

## 5. 주문/계좌 API

### 5.1 국내주식 주문

| API명 | 설명 |
|--------|------|
| 주식현금주문 | 현금 매수/매도 주문 |
| 주식신용주문 | 신용 매수/매도 주문 |
| 주식주문(정정취소) | 주문 정정 및 취소 |
| 정정취소가능주문내역조회 | 정정/취소 가능한 주문 확인 |
| 주식일별주문체결조회 | 일별 체결 내역 |
| 예약주문 | 예약 주문 설정 |

### 5.2 계좌 조회

| API명 | 함수명 | 설명 |
|--------|--------|------|
| 잔고조회 | `get_balance()` | 보유 종목, 평가금액, 손익 |
| 매수가능조회 | `get_buyable_cash()` | 매수 가능 금액 |
| 주문가능수량조회 | - | 종목별 주문 가능 수량 |

---

## 6. 기술 사양

### 6.1 API 엔드포인트

| 환경 | Domain |
|------|--------|
| 실전투자 | `https://openapi.koreainvestment.com:9443` |
| 모의투자 | `https://openapivts.koreainvestment.com:29443` |

### 6.2 인증 흐름

```
1. AppKey + AppSecret 발급 (KIS Developers 포털)
2. OAuth Token 발급 요청
3. Access Token으로 API 호출
4. WebSocket 사용시 별도 접속키 발급
```

### 6.3 응답 형식

| 항목 | 내용 |
|------|------|
| Format | JSON |
| Encoding | UTF-8 |
| Content-Type | `application/json; charset=utf-8` |

### 6.4 호출 제한

| API 종류 | 제한 |
|----------|------|
| 순위분석 API | 최대 30건 (다음 조회 불가) |
| 조건검색 API | 최대 100건 |
| 실시간 WebSocket | 무한루프 호출시 자동 차단 (2026.01.15 공지) |

### 6.5 모의투자 지원 여부

| 카테고리 | 지원 |
|----------|------|
| 기본시세 | O |
| 주문/계좌 | O |
| 순위분석 | X |
| 실시간시세 | O |

---

## 7. 개발 리소스

### 7.1 공식 리소스

| 리소스 | URL |
|--------|-----|
| KIS Developers 포털 | https://apiportal.koreainvestment.com |
| GitHub 샘플 코드 | https://github.com/koreainvestment/open-trading-api |
| API 문서 (Excel) | 포털에서 다운로드 가능 |

### 7.2 커뮤니티 라이브러리

| 라이브러리 | 언어 | URL |
|------------|------|-----|
| python-kis | Python | https://github.com/Soju06/python-kis |
| pykis | Python | https://github.com/pjueon/pykis |
| kis-client | Python | https://github.com/softyoungha/kis-client |
| kt_kisopenapi | Kotlin/Java | https://github.com/devngho/kt_kisopenapi |
| kisopenapi | R | https://cran.r-project.org/web/packages/kisopenapi |

### 7.3 학습 자료

| 자료 | URL |
|------|-----|
| WikiDocs - 자동매매 시스템 | https://wikidocs.net/165185 |
| WikiDocs - WebSocket 예제 | https://wikidocs.net/book/7847 |
| WikiDocs - 트레이딩 초급 예제 | https://wikidocs.net/159296 |

---

## 8. 활용 예시 코드

### 8.1 현재가 조회 (Python)

```python
from pykis import KIS

# 객체 생성
kis = KIS(appkey="YOUR_APP_KEY", appsecret="YOUR_APP_SECRET")

# 국내주식 현재가 조회
stock = kis.stock("005930")  # 삼성전자
quote = stock.quote()
print(f"현재가: {quote.price}")

# 해외주식 현재가 조회
us_stock = kis.stock("NVDA")  # 엔비디아
us_quote = us_stock.quote()
print(f"현재가: {us_quote.price}")
```

### 8.2 실시간 호가 구독 (WebSocket)

```python
# 삼성전자, SK하이닉스 실시간 호가 구독
kws.subscribe(request=asking_price_krx, data=["005930", "000660"])
```

### 8.3 기간별 시세 조회

```python
# 일봉 데이터 조회
history = stock.get_stock_history(unit="D")  # D=일, W=주, M=월

# OHLCV 데이터
ohlcv = stock.get_stock_history_by_ohlcv()
```

---

## 9. 참고 사항

### 9.1 API 사용 전 필수 절차

1. 한국투자증권 계좌 개설
2. KIS Developers 포털 가입
3. AppKey, AppSecret 발급
4. 모의투자로 충분한 테스트 후 실전 적용

### 9.2 주의사항

- WebSocket 무한루프 호출시 자동 차단
- HTS ID 정확히 입력 필요 (WebSocket 연결시)
- 미국 주식은 주간/애프터 시세 미반영
- 3개월 미거래시 서비스 자동 해지

---

*본 문서는 2026년 1월 29일 기준으로 작성되었습니다.*
